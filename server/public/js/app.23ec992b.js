(function(){"use strict";var e={809:function(e,t,a){var r=a(144),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[e._m(0),t("router-view")],1)},i=[function(){var e=this,t=e._self._c;return t("head",[t("link",{attrs:{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"}})])}],o={name:"App"},n=o,c=a(1),l=(0,c.Z)(n,s,i,!1,null,null,null),d=l.exports,u=a(345),p=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"user"},[t("div",{staticClass:"flex"},[t("h1",[e._v("Your profile")]),t("span",{staticClass:"material-icons",on:{click:e.logout}},[e._v("logout")])]),t("h4",[e._v("Profile ID: "+e._s(e.user.id))]),t("h4",[e._v("Name: "+e._s(e.user.firstName)+" "+e._s(e.user.lastName))]),t("h4",[e._v("Email: "+e._s(e.user.email))]),t("h4",[e._v("Created at: "+e._s(e.user.createdAt))])]),t("div",{staticClass:"flexcol"},[t("div",{staticClass:"main"},[t("div",{staticClass:"search"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"btn",attrs:{type:"text",id:"search",name:"search",placeholder:"Search for car by producer or model",maxlength:"50"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}}),t("span",{staticClass:"material-icons add",on:{click:e.add}},[e._v("add")])])]),e._l(e.cars,(function(e){return t("div",{key:e.id,staticClass:"wide"},[t("singleCar",{attrs:{id:e.id,producer:e.producer,model:e.model,prodDate:e.prodDate,purchaseDate:e.purchaseDate,mileage:e.mileage,recCreated:e.createdAt,recUpdated:e.updatedAt}})],1)}))],2)])},m=[],h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"item"},[e.error?t("span",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),t("div",{staticClass:"content"},[t("div",{staticClass:"flexcol"},[t("div",{staticClass:"data"},[e._v("ID: "+e._s(e.id))]),t("div",{staticClass:"data"},[e._v("Producent: "+e._s(e.producer))]),t("div",{staticClass:"data"},[e._v("Model: "+e._s(e.model))]),t("div",{staticClass:"data"},[e._v("Production Date: "+e._s(e.prodDate))]),t("div",{staticClass:"data"},[e._v("Date Of Purchase by the company: "+e._s(e.purchaseDate))]),t("div",{staticClass:"data"},[e._v("Car Mileage (km): "+e._s(e.mileage))]),t("div",{staticClass:"data"},[e._v("Record Created At: "+e._s(e.recCreated))]),t("div",{staticClass:"data"},[e._v("Record Updated At: "+e._s(e.recUpdated))])]),t("div",{staticClass:"options"},[t("span",{staticClass:"material-icons delete",on:{click:e.deleteCar}},[e._v("delete")]),t("span",{staticClass:"material-icons edit",on:{click:function(t){return e.navigateTo({name:"car",params:{carId:e.id}})}}},[e._v("edit")])])])])},v=[],g=a(629),f=a(669),C=a.n(f),_=a(702);r.ZP.use(g.ZP);var w=new g.ZP.Store({strict:!0,plugins:[(0,_.Z)()],state:{token:null,user:null,isUserLoggedIn:!1},mutations:{setToken(e,t){e.token=t,e.isUserLoggedIn=!!t},setUser(e,t){e.user=t}},actions:{setToken({commit:e},t){e("setToken",t)},setUser({commit:e},t){e("setUser",t)}}}),y=()=>C().create({baseURL:"",headers:{Auth:`Bearer ${w.state.token}`}}),b={getCars(e){return y().get("cars",{params:{search:e}})},addCar(e){return y().post("add",e)},show(e){return y().get(`cars/${e}`)},edit(e,t){return y().put(`cars/${t}`,e)},deleteCar(e){return y().delete(`cars/${e}`)}},D={name:"singleCar",async mounted(){this.isUserLoggedIn||this.$router.push({name:"Login"})},data(){return{error:null}},props:["id","producer","model","prodDate","purchaseDate","mileage","recCreated","recUpdated"],computed:{...(0,g.rn)(["isUserLoggedIn"])},methods:{navigateTo(e){this.$router.push(e)},async deleteCar(){if(confirm("Are you sure you want to delete?"))try{await b.deleteCar(this.id),console.log(),"/"==this.$router.currentRoute.fullPath?this.$router.push("/?search="):this.$router.push("/")}catch(e){this.error=e.response.data.error}}}},x=D,P=(0,c.Z)(x,h,v,!1,null,"422c328d",null),N=P.exports,$=a(486),k=a.n($),q={name:"carsList",components:{singleCar:N},data(){return{cars:[{}],search:""}},computed:{...(0,g.rn)(["isUserLoggedIn","user"])},mounted(){this.isUserLoggedIn||this.$router.push({name:"Login"})},watch:{search:k().debounce((async function(e){const t={name:"/"};""!==this.search&&(t.query={search:this.search}),this.$router.push(t)}),300),"$route.query.search":{immediate:!0,handler(e){this.search=e}},"$route.query.search":{immediate:!0,async handler(e){this.cars=(await b.getCars(e)).data}}},methods:{logout(){this.$store.dispatch("setToken",null),this.$store.dispatch("setUser",null),this.$router.push({name:"Login"})},add(){this.$router.push({name:"Add"})}}},L=q,U=(0,c.Z)(L,p,m,!1,null,"d008db36",null),I=U.exports,O=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"panel"},[t("h1",[e._v("Login")]),e.error?t("span",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"btn",attrs:{type:"text",id:"email",name:"email",placeholder:"email",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"btn",attrs:{type:"password",id:"password",name:"password",placeholder:"Password",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("input",{staticClass:"send",attrs:{type:"submit",name:"Send",value:"Login"},on:{click:e.login}}),t("router-link",{attrs:{to:"register"}},[e._v("Register here ")])],1)])},Z=[],A={register(e){return y().post("register",e)},login(e){return y().post("login",e)}},T={name:"loginPage",data(){return{email:"",password:"",error:null}},methods:{async login(){try{const e=await A.login({email:this.email,password:this.password});this.$store.dispatch("setToken",e.data.token),this.$store.dispatch("setUser",e.data.user),this.$router.push({name:"/"})}catch(e){this.error=e.response.data.error}}}},M=T,R=(0,c.Z)(M,O,Z,!1,null,"5f2895f6",null),S=R.exports,j=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"panel"},[t("h1",[e._v("Register now")]),e.error?t("span",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),t("div",{attrs:{id:"name"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.firstName,expression:"firstName"}],staticClass:"btn",attrs:{type:"text",id:"firstName",name:"firstName",placeholder:"First Name",required:""},domProps:{value:e.firstName},on:{input:function(t){t.target.composing||(e.firstName=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.lastName,expression:"lastName"}],staticClass:"btn",attrs:{type:"text",id:"lastName",name:"lastName",placeholder:"Last Name",required:""},domProps:{value:e.lastName},on:{input:function(t){t.target.composing||(e.lastName=t.target.value)}}})]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"btn",attrs:{type:"text",id:"email",name:"email",placeholder:"Email",maxlength:"255",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"btn",attrs:{type:"password",id:"password",name:"password",placeholder:"Password",minlength:"6",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),t("input",{staticClass:"send",attrs:{type:"submit",name:"Send",value:"Sign up"},on:{click:e.register}}),t("router-link",{attrs:{to:"login"}},[e._v("Login here ")])],1)])},E=[],Y={name:"registerPage",data(){return{firstName:"",lastName:"",email:"",password:"",error:null}},methods:{async register(){try{const e=await A.register({firstName:this.firstName,lastName:this.lastName,email:this.email,password:this.password});this.$store.dispatch("setToken",e.data.token),this.$store.dispatch("setUser",e.data.user),this.$router.push({name:"/"})}catch(e){this.error=e.response.data.error}}}},F=Y,B=(0,c.Z)(F,j,E,!1,null,"5074b74d",null),z=B.exports,G=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"panel"},[t("div",{staticClass:"flex2"},[t("router-link",{attrs:{to:"/"}},[t("span",{staticClass:"material-icons"},[e._v(" arrow_back ")])]),t("h1",[e._v("Add New Car")])],1),e.error?t("span",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),t("h3",[e._v("Producer")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.car.producer,expression:"car.producer"}],staticClass:"btn",attrs:{type:"text",id:"producer",name:"producer",required:""},domProps:{value:e.car.producer},on:{input:function(t){t.target.composing||e.$set(e.car,"producer",t.target.value)}}}),t("h3",[e._v("Model")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.car.model,expression:"car.model"}],staticClass:"btn",attrs:{type:"text",id:"model",name:"model",required:""},domProps:{value:e.car.model},on:{input:function(t){t.target.composing||e.$set(e.car,"model",t.target.value)}}}),t("h3",[e._v("Production Date")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.car.prodDate,expression:"car.prodDate"}],staticClass:"btn",attrs:{type:"number",id:"prodDate",name:"prodDate",required:""},domProps:{value:e.car.prodDate},on:{input:function(t){t.target.composing||e.$set(e.car,"prodDate",t.target.value)}}}),t("h3",[e._v("Date of purchase by the company")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.car.purchaseDate,expression:"car.purchaseDate"}],staticClass:"btn",attrs:{type:"date",id:"purchaseDate",name:"purchaseDate",required:""},domProps:{value:e.car.purchaseDate},on:{input:function(t){t.target.composing||e.$set(e.car,"purchaseDate",t.target.value)}}}),t("h3",[e._v("Car Mileage (km)")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.car.mileage,expression:"car.mileage"}],staticClass:"btn",attrs:{type:"number",id:"mileage",name:"mileage",required:""},domProps:{value:e.car.mileage},on:{input:function(t){t.target.composing||e.$set(e.car,"mileage",t.target.value)}}}),t("input",{staticClass:"send",attrs:{type:"submit",name:"add",value:"Add"},on:{click:e.add}})])])},H=[],J={name:"newCar",data(){return{car:{producer:null,model:null,prodDate:null,purchaseDate:null,mileage:null},error:null,required:e=>!!e||"Required."}},computed:{...(0,g.rn)(["isUserLoggedIn","user"])},mounted(){this.isUserLoggedIn||this.$router.push({name:"Login"})},methods:{async add(){const e=Object.keys(this.car).every((e=>!!this.car[e]));if(!e)return void(this.error="You need to fill in all required fields");let t=(new Date).toISOString().slice(0,10),a=(new Date).getFullYear();if(this.car.prodDate>a||this.car.prodDate<1900)this.error="Production date cant be in the future, nor before 1900";else if(this.car.purchaseDate>t||this.car.purchaseDate<"1970-00-00")this.error="Purchase date cant be in the future, nor before 1970";else if(this.car.mileage<0)this.error="Mileage cannot be negative number";else try{await b.addCar(this.car),this.$router.push({name:"/"})}catch(r){this.error=r.response.data.error}}}},K=J,Q=(0,c.Z)(K,G,H,!1,null,"acd8e458",null),V=Q.exports,W=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"panel"},[t("div",{staticClass:"flex2"},[t("router-link",{attrs:{to:"/"}},[t("span",{staticClass:"material-icons"},[e._v(" arrow_back ")])]),t("h1",[e._v("Edit Car")])],1),e.error?t("span",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),t("h3",[e._v("Producer")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.car.producer,expression:"car.producer"}],staticClass:"btn",attrs:{type:"text",id:"producer",name:"producer",required:""},domProps:{value:e.car.producer},on:{input:function(t){t.target.composing||e.$set(e.car,"producer",t.target.value)}}}),t("h3",[e._v("Model")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.car.model,expression:"car.model"}],staticClass:"btn",attrs:{type:"text",id:"model",name:"model",required:""},domProps:{value:e.car.model},on:{input:function(t){t.target.composing||e.$set(e.car,"model",t.target.value)}}}),t("h3",[e._v("Production Date")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.car.prodDate,expression:"car.prodDate"}],staticClass:"btn",attrs:{type:"number",id:"prodDate",name:"prodDate",required:""},domProps:{value:e.car.prodDate},on:{input:function(t){t.target.composing||e.$set(e.car,"prodDate",t.target.value)}}}),t("h3",[e._v("Date of purchase by the company")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.car.purchaseDate,expression:"car.purchaseDate"}],staticClass:"btn",attrs:{type:"date",id:"purchaseDate",name:"purchaseDate",required:""},domProps:{value:e.car.purchaseDate},on:{input:function(t){t.target.composing||e.$set(e.car,"purchaseDate",t.target.value)}}}),t("h3",[e._v("Car Mileage (km)")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.car.mileage,expression:"car.mileage"}],staticClass:"btn",attrs:{type:"number",id:"mileage",name:"mileage",required:""},domProps:{value:e.car.mileage},on:{input:function(t){t.target.composing||e.$set(e.car,"mileage",t.target.value)}}}),t("input",{staticClass:"send",attrs:{type:"submit",name:"add",value:"Edit"},on:{click:e.edit}})])])},X=[],ee={name:"editCar",data(){return{car:{producer:null,model:null,prodDate:null,purchaseDate:null,mileage:null},error:null,required:e=>!!e||"Required."}},computed:{...(0,g.rn)(["isUserLoggedIn","user"])},async mounted(){if(this.isUserLoggedIn)try{const e=this.$route.params.carId;this.car=(await b.show(e)).data,delete this.car.UserId,delete this.car.id,delete this.car.createdAt,delete this.car.updatedAt}catch(e){this.error=e.response.data.error}else this.$router.push({name:"Login"})},methods:{async edit(){const e=Object.keys(this.car).every((e=>!!this.car[e]));if(!e)return void(this.error="You need to fill in all required fields");let t=(new Date).toISOString().slice(0,10),a=(new Date).getFullYear();if(this.car.prodDate>a||this.car.prodDate<1900)this.error="Production date cant be in the future, nor before 1900";else if(this.car.purchaseDate>t||this.car.purchaseDate<"1970-00-00")this.error="Purchase date cant be in the future, nor before 1970";else if(this.car.mileage<0)this.error="Mileage cannot be negative number";else try{await b.edit(this.car,this.$route.params.carId),this.$router.push({name:"/"})}catch(r){this.error=r.response.data.error,console.log(this.error)}}}},te=ee,ae=(0,c.Z)(te,W,X,!1,null,"3ae11977",null),re=ae.exports;r.ZP.use(u.Z);var se=new u.Z({routes:[{path:"/",name:"/",component:I},{path:"/register",name:"Register",component:z},{path:"/login",name:"Login",component:S},{path:"/add",name:"Add",component:V},{path:"/cars/:carId",name:"car",component:re}]});r.ZP.config.productionTip=!1,new r.ZP({router:se,store:w,render:e=>e(d)}).$mount("#app")}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,r,s,i){if(!r){var o=1/0;for(d=0;d<e.length;d++){r=e[d][0],s=e[d][1],i=e[d][2];for(var n=!0,c=0;c<r.length;c++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[c])}))?r.splice(c--,1):(n=!1,i<o&&(o=i));if(n){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,i,o=r[0],n=r[1],c=r[2],l=0;if(o.some((function(t){return 0!==e[t]}))){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(c)var d=c(a)}for(t&&t(r);l<o.length;l++)i=o[l],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},r=self["webpackChunkclient"]=self["webpackChunkclient"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(809)}));r=a.O(r)})();
//# sourceMappingURL=app.23ec992b.js.map